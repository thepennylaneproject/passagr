{
    "$schema": "https://railway.app/railway.schema.json",
    "build": {
        "builder": "NIXPACKS"
    },
    "deploy": {
        "startCommand": "npm start",
        "restartPolicyType": "ON_FAILURE",
        "restartPolicyMaxRetries": 10
    },
    "cron": [
        {
            "name": "nightly-freshness-scan",
            "schedule": "0 2 * * *",
            "command": "curl -X POST -H 'x-cron-secret: $CRON_SECRET' $RAILWAY_PUBLIC_DOMAIN/jobs/freshness-scan"
        },
        {
            "name": "weekly-link-check",
            "schedule": "0 3 * * 0",
            "command": "curl -X POST -H 'x-cron-secret: $CRON_SECRET' $RAILWAY_PUBLIC_DOMAIN/jobs/link-check"
        },
        {
            "name": "hourly-index-refresh",
            "schedule": "0 * * * *",
            "command": "curl -X POST -H 'x-cron-secret: $CRON_SECRET' $RAILWAY_PUBLIC_DOMAIN/jobs/index-refresh"
        }
    ]
}